{"version":3,"file":"mortice.2.0.1.min.js","sources":["../node_modules/events/events.js","../lib/constants.js","../node_modules/observable-webworkers/lib/index.js","../lib/browser.js","../node_modules/promise-timeout/index.js","../node_modules/nanoid/url-alphabet/index.js","../node_modules/nanoid/index.prod.js","../node_modules/eventemitter3/index.js","../node_modules/p-timeout/index.js","../node_modules/p-finally/index.js","../node_modules/p-queue/dist/lower-bound.js","../node_modules/p-queue/dist/priority-queue.js","../node_modules/p-queue/dist/index.js","../lib/index.js"],"sourcesContent":["// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","\nmodule.exports = {\n  WORKER_REQUEST_READ_LOCK: 'lock:worker:request-read',\n  WORKER_RELEASE_READ_LOCK: 'lock:worker:release-read',\n  MASTER_GRANT_READ_LOCK: 'lock:master:grant-read',\n\n  WORKER_REQUEST_WRITE_LOCK: 'lock:worker:request-write',\n  WORKER_RELEASE_WRITE_LOCK: 'lock:worker:release-write',\n  MASTER_GRANT_WRITE_LOCK: 'lock:master:grant-write'\n}\n","const events = {}\n\nconst observable = (worker) => {\n  worker.addEventListener('message', (event) => {\n    observable.dispatchEvent('message', worker, event)\n  })\n\n  if (worker.port) {\n    worker.port.addEventListener('message', (event) => {\n      observable.dispatchEvent('message', worker, event)\n    })\n  }\n}\n\nobservable.addEventListener = (type, fn) => {\n  if (!events[type]) {\n    events[type] = []\n  }\n\n  events[type].push(fn)\n}\n\nobservable.removeEventListener = (type, fn) => {\n  if (!events[type]) {\n    return\n  }\n\n  events[type] = events[type]\n    .filter(listener => listener === fn)\n}\n\nobservable.dispatchEvent = function () {\n  const args = Array.prototype.slice.call(arguments)\n  const type = args.shift()\n\n  if (!events[type]) {\n    return\n  }\n\n  events[type].forEach(fn => fn.apply(null, args))\n}\n\nmodule.exports = observable\n","const EventEmitter = require('events').EventEmitter\nconst { nanoid } = require('nanoid')\nconst {\n  WORKER_REQUEST_READ_LOCK,\n  WORKER_RELEASE_READ_LOCK,\n  MASTER_GRANT_READ_LOCK,\n  WORKER_REQUEST_WRITE_LOCK,\n  WORKER_RELEASE_WRITE_LOCK,\n  MASTER_GRANT_WRITE_LOCK\n} = require('./constants')\nconst observer = require('observable-webworkers')\n\nconst handleWorkerLockRequest = (emitter, masterEvent, requestType, releaseType, grantType) => {\n  return (worker, event) => {\n    if (!event || !event.data || event.data.type !== requestType) {\n      return\n    }\n\n    const requestEvent = {\n      type: event.data.type,\n      name: event.data.name,\n      identifier: event.data.identifier\n    }\n\n    emitter.emit(masterEvent, requestEvent.name, () => {\n      // grant lock to worker\n      worker.postMessage({\n        type: grantType,\n        name: requestEvent.name,\n        identifier: requestEvent.identifier\n      })\n\n      // wait for worker to finish\n      return new Promise((resolve) => {\n        const releaseEventListener = (event) => {\n          if (!event || !event.data) {\n            return\n          }\n\n          const releaseEvent = {\n            type: event.data.type,\n            name: event.data.name,\n            identifier: event.data.identifier\n          }\n\n          if (releaseEvent && releaseEvent.type === releaseType && releaseEvent.identifier === requestEvent.identifier) {\n            worker.removeEventListener('message', releaseEventListener)\n            resolve()\n          }\n        }\n\n        worker.addEventListener('message', releaseEventListener)\n      })\n    })\n  }\n}\n\nconst makeWorkerLockRequest = (name, requestType, grantType, releaseType) => {\n  return () => {\n    const id = nanoid()\n\n    globalThis.postMessage({\n      type: requestType,\n      identifier: id,\n      name\n    })\n\n    return new Promise((resolve) => {\n      const listener = (event) => {\n        if (!event || !event.data) {\n          return\n        }\n\n        const responseEvent = {\n          type: event.data.type,\n          identifier: event.data.identifier\n        }\n\n        if (responseEvent && responseEvent.type === grantType && responseEvent.identifier === id) {\n          globalThis.removeEventListener('message', listener)\n\n          // grant lock\n          resolve(() => {\n            // release lock\n            globalThis.postMessage({\n              type: releaseType,\n              identifier: id,\n              name\n            })\n          })\n        }\n      }\n\n      globalThis.addEventListener('message', listener)\n    })\n  }\n}\n\nconst defaultOptions = {\n  singleProcess: false\n}\n\nmodule.exports = (options) => {\n  options = Object.assign({}, defaultOptions, options)\n  const isMaster = !!globalThis.document || options.singleProcess\n\n  if (isMaster) {\n    const emitter = new EventEmitter()\n\n    observer.addEventListener('message', handleWorkerLockRequest(emitter, 'requestReadLock', WORKER_REQUEST_READ_LOCK, WORKER_RELEASE_READ_LOCK, MASTER_GRANT_READ_LOCK))\n    observer.addEventListener('message', handleWorkerLockRequest(emitter, 'requestWriteLock', WORKER_REQUEST_WRITE_LOCK, WORKER_RELEASE_WRITE_LOCK, MASTER_GRANT_WRITE_LOCK))\n\n    return emitter\n  }\n\n  return {\n    isWorker: true,\n    readLock: (name) => makeWorkerLockRequest(name, WORKER_REQUEST_READ_LOCK, MASTER_GRANT_READ_LOCK, WORKER_RELEASE_READ_LOCK),\n    writeLock: (name) => makeWorkerLockRequest(name, WORKER_REQUEST_WRITE_LOCK, MASTER_GRANT_WRITE_LOCK, WORKER_RELEASE_WRITE_LOCK)\n  }\n}\n","// Copyright (c) 2015-2017 David M. Lee, II\n'use strict';\n\n/**\n * Local reference to TimeoutError\n * @private\n */\nvar TimeoutError;\n\n/**\n * Rejects a promise with a {@link TimeoutError} if it does not settle within\n * the specified timeout.\n *\n * @param {Promise} promise The promise.\n * @param {number} timeoutMillis Number of milliseconds to wait on settling.\n * @returns {Promise} Either resolves/rejects with `promise`, or rejects with\n *                   `TimeoutError`, whichever settles first.\n */\nvar timeout = module.exports.timeout = function(promise, timeoutMillis) {\n  var error = new TimeoutError(),\n      timeout;\n\n  return Promise.race([\n    promise,\n    new Promise(function(resolve, reject) {\n      timeout = setTimeout(function() {\n        reject(error);\n      }, timeoutMillis);\n    }),\n  ]).then(function(v) {\n    clearTimeout(timeout);\n    return v;\n  }, function(err) {\n    clearTimeout(timeout);\n    throw err;\n  });\n};\n\n/**\n * Exception indicating that the timeout expired.\n */\nTimeoutError = module.exports.TimeoutError = function() {\n  Error.call(this)\n  this.stack = Error().stack\n  this.message = 'Timeout';\n};\n\nTimeoutError.prototype = Object.create(Error.prototype);\nTimeoutError.prototype.name = \"TimeoutError\";\n","// This alphabet uses `A-Za-z0-9_-` symbols. The genetic algorithm helped\n// optimize the gzip compression for this alphabet.\nlet urlAlphabet =\n  'ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW'\n\nexport { urlAlphabet }\n","// This file replaces `index.js` in bundlers like webpack or Rollup,\n// according to `browser` config in `package.json`.\n\nimport { urlAlphabet } from './url-alphabet/index.js'\n\nif (false) {\n  // All bundlers will remove this block in the production bundle.\n  if (\n    typeof navigator !== 'undefined' &&\n    navigator.product === 'ReactNative' &&\n    typeof crypto === 'undefined'\n  ) {\n    throw new Error(\n      'React Native does not have a built-in secure random generator. ' +\n        'If you don’t need unpredictable IDs use `nanoid/non-secure`. ' +\n        'For secure IDs, import `react-native-get-random-values` ' +\n        'before Nano ID.'\n    )\n  }\n  if (typeof msCrypto !== 'undefined' && typeof crypto === 'undefined') {\n    throw new Error(\n      'Import file with `if (!window.crypto) window.crypto = window.msCrypto`' +\n        ' before importing Nano ID to fix IE 11 support'\n    )\n  }\n  if (typeof crypto === 'undefined') {\n    throw new Error(\n      'Your browser does not have secure random generator. ' +\n        'If you don’t need unpredictable IDs, you can use nanoid/non-secure.'\n    )\n  }\n}\n\nlet random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\n\nlet customRandom = (alphabet, size, getRandom) => {\n  // First, a bitmask is necessary to generate the ID. The bitmask makes bytes\n  // values closer to the alphabet size. The bitmask calculates the closest\n  // `2^31 - 1` number, which exceeds the alphabet size.\n  // For example, the bitmask for the alphabet size 30 is 31 (00011111).\n  // `Math.clz32` is not used, because it is not available in browsers.\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  // Though, the bitmask solution is not perfect since the bytes exceeding\n  // the alphabet size are refused. Therefore, to reliably generate the ID,\n  // the random bytes redundancy has to be satisfied.\n\n  // Note: every hardware random generator call is performance expensive,\n  // because the system call for entropy collection takes a lot of time.\n  // So, to avoid additional system calls, extra bytes are requested in advance.\n\n  // Next, a step determines how many random bytes to generate.\n  // The number of random bytes gets decided upon the ID size, mask,\n  // alphabet size, and magic number 1.6 (using 1.6 peaks at performance\n  // according to benchmarks).\n\n  // `-~f => Math.ceil(f)` if f is a float\n  // `-~i => i + 1` if i is an integer\n  let step = -~((1.6 * mask * size) / alphabet.length)\n\n  return () => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      // A compact alternative for `for (var i = 0; i < step; i++)`.\n      let j = step\n      while (j--) {\n        // Adding `|| ''` refuses a random byte that exceeds the alphabet size.\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\n\nlet customAlphabet = (alphabet, size) => customRandom(alphabet, size, random)\n\nlet nanoid = (size = 21) => {\n  let id = ''\n  let bytes = crypto.getRandomValues(new Uint8Array(size))\n\n  // A compact alternative for `for (var i = 0; i < step; i++)`.\n  while (size--) {\n    // It is incorrect to use bytes exceeding the alphabet size.\n    // The following mask reduces the random byte in the 0-255 value\n    // range to the 0-63 value range. Therefore, adding hacks, such\n    // as empty string fallback or magic numbers, is unneccessary because\n    // the bitmask trims bytes down to the alphabet size.\n    let byte = bytes[size] & 63\n    if (byte < 36) {\n      // `0-9a-z`\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      // `A-Z`\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte < 63) {\n      id += '_'\n    } else {\n      id += '-'\n    }\n  }\n  return id\n}\n\nexport { nanoid, customAlphabet, customRandom, urlAlphabet, random }\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","'use strict';\n\nconst pFinally = require('p-finally');\n\nclass TimeoutError extends Error {\n\tconstructor(message) {\n\t\tsuper(message);\n\t\tthis.name = 'TimeoutError';\n\t}\n}\n\nconst pTimeout = (promise, milliseconds, fallback) => new Promise((resolve, reject) => {\n\tif (typeof milliseconds !== 'number' || milliseconds < 0) {\n\t\tthrow new TypeError('Expected `milliseconds` to be a positive number');\n\t}\n\n\tif (milliseconds === Infinity) {\n\t\tresolve(promise);\n\t\treturn;\n\t}\n\n\tconst timer = setTimeout(() => {\n\t\tif (typeof fallback === 'function') {\n\t\t\ttry {\n\t\t\t\tresolve(fallback());\n\t\t\t} catch (error) {\n\t\t\t\treject(error);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst message = typeof fallback === 'string' ? fallback : `Promise timed out after ${milliseconds} milliseconds`;\n\t\tconst timeoutError = fallback instanceof Error ? fallback : new TimeoutError(message);\n\n\t\tif (typeof promise.cancel === 'function') {\n\t\t\tpromise.cancel();\n\t\t}\n\n\t\treject(timeoutError);\n\t}, milliseconds);\n\n\t// TODO: Use native `finally` keyword when targeting Node.js 10\n\tpFinally(\n\t\t// eslint-disable-next-line promise/prefer-await-to-then\n\t\tpromise.then(resolve, reject),\n\t\t() => {\n\t\t\tclearTimeout(timer);\n\t\t}\n\t);\n});\n\nmodule.exports = pTimeout;\n// TODO: Remove this for the next major release\nmodule.exports.default = pTimeout;\n\nmodule.exports.TimeoutError = TimeoutError;\n","'use strict';\nmodule.exports = (promise, onFinally) => {\n\tonFinally = onFinally || (() => {});\n\n\treturn promise.then(\n\t\tval => new Promise(resolve => {\n\t\t\tresolve(onFinally());\n\t\t}).then(() => val),\n\t\terr => new Promise(resolve => {\n\t\t\tresolve(onFinally());\n\t\t}).then(() => {\n\t\t\tthrow err;\n\t\t})\n\t);\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Port of lower_bound from https://en.cppreference.com/w/cpp/algorithm/lower_bound\n// Used to compute insertion index to keep queue sorted after insertion\nfunction lowerBound(array, value, comparator) {\n    let first = 0;\n    let count = array.length;\n    while (count > 0) {\n        const step = (count / 2) | 0;\n        let it = first + step;\n        if (comparator(array[it], value) <= 0) {\n            first = ++it;\n            count -= step + 1;\n        }\n        else {\n            count = step;\n        }\n    }\n    return first;\n}\nexports.default = lowerBound;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst lower_bound_1 = require(\"./lower-bound\");\nclass PriorityQueue {\n    constructor() {\n        this._queue = [];\n    }\n    enqueue(run, options) {\n        options = Object.assign({ priority: 0 }, options);\n        const element = {\n            priority: options.priority,\n            run\n        };\n        if (this.size && this._queue[this.size - 1].priority >= options.priority) {\n            this._queue.push(element);\n            return;\n        }\n        const index = lower_bound_1.default(this._queue, element, (a, b) => b.priority - a.priority);\n        this._queue.splice(index, 0, element);\n    }\n    dequeue() {\n        const item = this._queue.shift();\n        return item === null || item === void 0 ? void 0 : item.run;\n    }\n    filter(options) {\n        return this._queue.filter((element) => element.priority === options.priority).map((element) => element.run);\n    }\n    get size() {\n        return this._queue.length;\n    }\n}\nexports.default = PriorityQueue;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst EventEmitter = require(\"eventemitter3\");\nconst p_timeout_1 = require(\"p-timeout\");\nconst priority_queue_1 = require(\"./priority-queue\");\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst empty = () => { };\nconst timeoutError = new p_timeout_1.TimeoutError();\n/**\nPromise queue with concurrency control.\n*/\nclass PQueue extends EventEmitter {\n    constructor(options) {\n        var _a, _b, _c, _d;\n        super();\n        this._intervalCount = 0;\n        this._intervalEnd = 0;\n        this._pendingCount = 0;\n        this._resolveEmpty = empty;\n        this._resolveIdle = empty;\n        // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n        options = Object.assign({ carryoverConcurrencyCount: false, intervalCap: Infinity, interval: 0, concurrency: Infinity, autoStart: true, queueClass: priority_queue_1.default }, options);\n        if (!(typeof options.intervalCap === 'number' && options.intervalCap >= 1)) {\n            throw new TypeError(`Expected \\`intervalCap\\` to be a number from 1 and up, got \\`${(_b = (_a = options.intervalCap) === null || _a === void 0 ? void 0 : _a.toString()) !== null && _b !== void 0 ? _b : ''}\\` (${typeof options.intervalCap})`);\n        }\n        if (options.interval === undefined || !(Number.isFinite(options.interval) && options.interval >= 0)) {\n            throw new TypeError(`Expected \\`interval\\` to be a finite number >= 0, got \\`${(_d = (_c = options.interval) === null || _c === void 0 ? void 0 : _c.toString()) !== null && _d !== void 0 ? _d : ''}\\` (${typeof options.interval})`);\n        }\n        this._carryoverConcurrencyCount = options.carryoverConcurrencyCount;\n        this._isIntervalIgnored = options.intervalCap === Infinity || options.interval === 0;\n        this._intervalCap = options.intervalCap;\n        this._interval = options.interval;\n        this._queue = new options.queueClass();\n        this._queueClass = options.queueClass;\n        this.concurrency = options.concurrency;\n        this._timeout = options.timeout;\n        this._throwOnTimeout = options.throwOnTimeout === true;\n        this._isPaused = options.autoStart === false;\n    }\n    get _doesIntervalAllowAnother() {\n        return this._isIntervalIgnored || this._intervalCount < this._intervalCap;\n    }\n    get _doesConcurrentAllowAnother() {\n        return this._pendingCount < this._concurrency;\n    }\n    _next() {\n        this._pendingCount--;\n        this._tryToStartAnother();\n        this.emit('next');\n    }\n    _resolvePromises() {\n        this._resolveEmpty();\n        this._resolveEmpty = empty;\n        if (this._pendingCount === 0) {\n            this._resolveIdle();\n            this._resolveIdle = empty;\n            this.emit('idle');\n        }\n    }\n    _onResumeInterval() {\n        this._onInterval();\n        this._initializeIntervalIfNeeded();\n        this._timeoutId = undefined;\n    }\n    _isIntervalPaused() {\n        const now = Date.now();\n        if (this._intervalId === undefined) {\n            const delay = this._intervalEnd - now;\n            if (delay < 0) {\n                // Act as the interval was done\n                // We don't need to resume it here because it will be resumed on line 160\n                this._intervalCount = (this._carryoverConcurrencyCount) ? this._pendingCount : 0;\n            }\n            else {\n                // Act as the interval is pending\n                if (this._timeoutId === undefined) {\n                    this._timeoutId = setTimeout(() => {\n                        this._onResumeInterval();\n                    }, delay);\n                }\n                return true;\n            }\n        }\n        return false;\n    }\n    _tryToStartAnother() {\n        if (this._queue.size === 0) {\n            // We can clear the interval (\"pause\")\n            // Because we can redo it later (\"resume\")\n            if (this._intervalId) {\n                clearInterval(this._intervalId);\n            }\n            this._intervalId = undefined;\n            this._resolvePromises();\n            return false;\n        }\n        if (!this._isPaused) {\n            const canInitializeInterval = !this._isIntervalPaused();\n            if (this._doesIntervalAllowAnother && this._doesConcurrentAllowAnother) {\n                const job = this._queue.dequeue();\n                if (!job) {\n                    return false;\n                }\n                this.emit('active');\n                job();\n                if (canInitializeInterval) {\n                    this._initializeIntervalIfNeeded();\n                }\n                return true;\n            }\n        }\n        return false;\n    }\n    _initializeIntervalIfNeeded() {\n        if (this._isIntervalIgnored || this._intervalId !== undefined) {\n            return;\n        }\n        this._intervalId = setInterval(() => {\n            this._onInterval();\n        }, this._interval);\n        this._intervalEnd = Date.now() + this._interval;\n    }\n    _onInterval() {\n        if (this._intervalCount === 0 && this._pendingCount === 0 && this._intervalId) {\n            clearInterval(this._intervalId);\n            this._intervalId = undefined;\n        }\n        this._intervalCount = this._carryoverConcurrencyCount ? this._pendingCount : 0;\n        this._processQueue();\n    }\n    /**\n    Executes all queued functions until it reaches the limit.\n    */\n    _processQueue() {\n        // eslint-disable-next-line no-empty\n        while (this._tryToStartAnother()) { }\n    }\n    get concurrency() {\n        return this._concurrency;\n    }\n    set concurrency(newConcurrency) {\n        if (!(typeof newConcurrency === 'number' && newConcurrency >= 1)) {\n            throw new TypeError(`Expected \\`concurrency\\` to be a number from 1 and up, got \\`${newConcurrency}\\` (${typeof newConcurrency})`);\n        }\n        this._concurrency = newConcurrency;\n        this._processQueue();\n    }\n    /**\n    Adds a sync or async task to the queue. Always returns a promise.\n    */\n    async add(fn, options = {}) {\n        return new Promise((resolve, reject) => {\n            const run = async () => {\n                this._pendingCount++;\n                this._intervalCount++;\n                try {\n                    const operation = (this._timeout === undefined && options.timeout === undefined) ? fn() : p_timeout_1.default(Promise.resolve(fn()), (options.timeout === undefined ? this._timeout : options.timeout), () => {\n                        if (options.throwOnTimeout === undefined ? this._throwOnTimeout : options.throwOnTimeout) {\n                            reject(timeoutError);\n                        }\n                        return undefined;\n                    });\n                    resolve(await operation);\n                }\n                catch (error) {\n                    reject(error);\n                }\n                this._next();\n            };\n            this._queue.enqueue(run, options);\n            this._tryToStartAnother();\n            this.emit('add');\n        });\n    }\n    /**\n    Same as `.add()`, but accepts an array of sync or async functions.\n\n    @returns A promise that resolves when all functions are resolved.\n    */\n    async addAll(functions, options) {\n        return Promise.all(functions.map(async (function_) => this.add(function_, options)));\n    }\n    /**\n    Start (or resume) executing enqueued tasks within concurrency limit. No need to call this if queue is not paused (via `options.autoStart = false` or by `.pause()` method.)\n    */\n    start() {\n        if (!this._isPaused) {\n            return this;\n        }\n        this._isPaused = false;\n        this._processQueue();\n        return this;\n    }\n    /**\n    Put queue execution on hold.\n    */\n    pause() {\n        this._isPaused = true;\n    }\n    /**\n    Clear the queue.\n    */\n    clear() {\n        this._queue = new this._queueClass();\n    }\n    /**\n    Can be called multiple times. Useful if you for example add additional items at a later time.\n\n    @returns A promise that settles when the queue becomes empty.\n    */\n    async onEmpty() {\n        // Instantly resolve if the queue is empty\n        if (this._queue.size === 0) {\n            return;\n        }\n        return new Promise(resolve => {\n            const existingResolve = this._resolveEmpty;\n            this._resolveEmpty = () => {\n                existingResolve();\n                resolve();\n            };\n        });\n    }\n    /**\n    The difference with `.onEmpty` is that `.onIdle` guarantees that all work from the queue has finished. `.onEmpty` merely signals that the queue is empty, but it could mean that some promises haven't completed yet.\n\n    @returns A promise that settles when the queue becomes empty, and all promises have completed; `queue.size === 0 && queue.pending === 0`.\n    */\n    async onIdle() {\n        // Instantly resolve if none pending and if nothing else is queued\n        if (this._pendingCount === 0 && this._queue.size === 0) {\n            return;\n        }\n        return new Promise(resolve => {\n            const existingResolve = this._resolveIdle;\n            this._resolveIdle = () => {\n                existingResolve();\n                resolve();\n            };\n        });\n    }\n    /**\n    Size of the queue.\n    */\n    get size() {\n        return this._queue.size;\n    }\n    /**\n    Size of the queue, filtered by the given options.\n\n    For example, this can be used to find the number of items remaining in the queue with a specific priority level.\n    */\n    sizeBy(options) {\n        // eslint-disable-next-line unicorn/no-fn-reference-in-iterator\n        return this._queue.filter(options).length;\n    }\n    /**\n    Number of pending promises.\n    */\n    get pending() {\n        return this._pendingCount;\n    }\n    /**\n    Whether the queue is currently paused.\n    */\n    get isPaused() {\n        return this._isPaused;\n    }\n    get timeout() {\n        return this._timeout;\n    }\n    /**\n    Set the timeout for future operations.\n    */\n    set timeout(milliseconds) {\n        this._timeout = milliseconds;\n    }\n}\nexports.default = PQueue;\n","const browser = require('./browser')\nconst { default: Queue } = require('p-queue')\nconst { timeout } = require('promise-timeout')\nconst observe = require('observable-webworkers')\n\nconst mutexes = {}\nlet implementation\n\nfunction createReleaseable (queue, options) {\n  let res\n\n  const p = new Promise((resolve) => {\n    res = resolve\n  })\n\n  queue.add(() => timeout((() => {\n    return new Promise((resolve) => {\n      res(() => {\n        resolve()\n      })\n    })\n  })(), options.timeout))\n\n  return p\n}\n\nconst createMutex = (name, options) => {\n  if (implementation.isWorker) {\n    return {\n      readLock: implementation.readLock(name, options),\n      writeLock: implementation.writeLock(name, options)\n    }\n  }\n\n  const masterQueue = new Queue({ concurrency: 1 })\n  let readQueue = null\n\n  return {\n    readLock: () => {\n      // If there's already a read queue, just add the task to it\n      if (readQueue) {\n        return createReleaseable(readQueue, options)\n      }\n\n      // Create a new read queue\n      readQueue = new Queue({\n        concurrency: options.concurrency,\n        autoStart: false\n      })\n      const localReadQueue = readQueue\n\n      // Add the task to the read queue\n      const readPromise = createReleaseable(readQueue, options)\n\n      masterQueue.add(() => {\n        // Start the task only once the master queue has completed processing\n        // any previous tasks\n        localReadQueue.start()\n\n        // Once all the tasks in the read queue have completed, remove it so\n        // that the next read lock will occur after any write locks that were\n        // started in the interim\n        return localReadQueue.onIdle()\n          .then(() => {\n            if (readQueue === localReadQueue) {\n              readQueue = null\n            }\n          })\n      })\n\n      return readPromise\n    },\n    writeLock: () => {\n      // Remove the read queue reference, so that any later read locks will be\n      // added to a new queue that starts after this write lock has been\n      // released\n      readQueue = null\n\n      return createReleaseable(masterQueue, options)\n    }\n  }\n}\n\nconst defaultOptions = {\n  concurrency: Infinity,\n  timeout: 84600000,\n  global: global,\n  singleProcess: false\n}\n\nmodule.exports.Lock = (name, options) => {\n  if (!options) {\n    options = {}\n  }\n\n  if (typeof name === 'object') {\n    options = name\n    name = 'lock'\n  }\n\n  if (!name) {\n    name = 'lock'\n  }\n\n  options = Object.assign({}, defaultOptions, options)\n\n  if (!implementation) {\n    implementation = browser(options)\n\n    if (!implementation.isWorker) {\n      // we are master, set up worker requests\n      implementation.on('requestReadLock', (name, fn) => {\n        if (!mutexes[name]) {\n          return\n        }\n\n        mutexes[name].readLock()\n          .then(release => fn().finally(() => release()))\n      })\n\n      implementation.on('requestWriteLock', async (name, fn) => {\n        if (!mutexes[name]) {\n          return\n        }\n\n        mutexes[name].writeLock()\n          .then(release => fn().finally(() => release()))\n      })\n    }\n  }\n\n  if (!mutexes[name]) {\n    mutexes[name] = createMutex(name, options)\n  }\n\n  return mutexes[name]\n}\n\nmodule.exports.Worker = function (script, Impl) {\n  Impl = Impl || global.Worker\n  let worker\n\n  try {\n    worker = new Impl(script)\n  } catch (error) {\n    if (error.message.includes('not a constructor')) {\n      worker = Impl(script)\n    }\n  }\n\n  if (!worker) {\n    throw new Error('Could not create Worker from', Impl)\n  }\n\n  observe(worker)\n\n  return worker\n}\n"],"names":["R","ReflectApply","ReflectOwnKeys","NumberIsNaN","defaultMaxListeners","constants","lib","browser","TimeoutError","EventEmitter","init","call","this","checkListener","listener","TypeError","_getMaxListeners","that","undefined","_maxListeners","_addListener","target","type","prepend","m","events","existing","w","warning","_events","Object","create","_eventsCount","newListener","emit","unshift","push","length","warned","Error","String","name","emitter","count","console","warn","onceWrapper","fired","removeListener","wrapFn","arguments","apply","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","arr","ret","Array","i","unwrapListeners","arrayClone","listenerCount","n","copy","eventTargetAgnosticAddListener","flags","on","once","addEventListener","wrapListener","arg","removeEventListener","Reflect","receiver","args","Function","prototype","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","Number","isNaN","value","Promise","resolve","reject","errorListener","err","resolver","slice","handler","addErrorHandlerIfEventEmitter","defineProperty","enumerable","get","set","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","er","len","listeners","error","message","context","addListener","prependListener","prependOnceListener","off","list","position","originalListener","shift","index","pop","spliceOne","removeAllListeners","keys","key","rawListeners","eventNames","random","bytes","crypto","getRandomValues","Uint8Array","customRandom","alphabet","size","getRandom","mask","Math","log","LN2","step","id","j","byte","toString","toUpperCase","WORKER_REQUEST_READ_LOCK","WORKER_RELEASE_READ_LOCK","MASTER_GRANT_READ_LOCK","WORKER_REQUEST_WRITE_LOCK","WORKER_RELEASE_WRITE_LOCK","MASTER_GRANT_WRITE_LOCK","observable","worker","event","dispatchEvent","port","fn","filter","forEach","require$$0","nanoid","require$$1","require$$2","observer","require$$3","handleWorkerLockRequest","masterEvent","requestType","releaseType","grantType","data","requestEvent","identifier","postMessage","releaseEventListener","releaseEvent","makeWorkerLockRequest","globalThis","responseEvent","defaultOptions","singleProcess","options","assign","document","isWorker","readLock","writeLock","has","hasOwnProperty","prefix","Events","EE","evt","clearEvent","__proto__","names","l","ee","handlers","a1","a2","a3","a4","a5","prefixed","module","pFinally","promise","onFinally","then","val","[object Object]","super","pTimeout","milliseconds","fallback","Infinity","timer","setTimeout","timeoutError","cancel","clearTimeout","lowerBound_1","array","comparator","first","it","priorityQueue","lower_bound_1","_queue","run","element","priority","default","a","b","splice","item","map","dist","p_timeout_1","priority_queue_1","empty","_a","_b","_c","_d","_intervalCount","_intervalEnd","_pendingCount","_resolveEmpty","_resolveIdle","carryoverConcurrencyCount","intervalCap","interval","concurrency","autoStart","queueClass","isFinite","_carryoverConcurrencyCount","_isIntervalIgnored","_intervalCap","_interval","_queueClass","_timeout","timeout","_throwOnTimeout","throwOnTimeout","_isPaused","_doesIntervalAllowAnother","_doesConcurrentAllowAnother","_concurrency","_tryToStartAnother","_onInterval","_initializeIntervalIfNeeded","_timeoutId","now","Date","_intervalId","delay","_onResumeInterval","clearInterval","_resolvePromises","canInitializeInterval","_isIntervalPaused","job","dequeue","setInterval","_processQueue","newConcurrency","enqueue","async","operation","_next","functions","all","function_","add","existingResolve","pending","isPaused","timeoutMillis","race","v","stack","Queue","observe","mutexes","implementation","createReleaseable","queue","res","p","global","release","finally","masterQueue","readQueue","localReadQueue","readPromise","start","onIdle","createMutex","script","Impl","Worker","includes"],"mappings":"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"}